# Linux系统备份完整指南

> Linux相对于Windows有一个最大的好处就是：Linux安装程序的过程只有复制文件的过程，没有写注册表的过程，因此，Linux系统重装之后只要将之前系统的程序文件备份好，重新放到新系统下即可使用。

## 备份策略取决于使用方式

如何备份取决于如何使用的Linux以及你备份的目的！

### 我的使用方式

大部分用户应用软件都会默认安装在`/usr/local`下，另外，我自己还会将部分软件安装在`/opt/`下，因此，这两个目录我都需要备份。

`/etc`目录下保留了几乎Linux系统所有的配置文件，也需要备份。

其它的东西我都会放在home用户目录中，因此，将`/home`目录备份好就OK了！

如果你还使用数据库，那么var的某些目录如lib也可能要备份，如果更新过内核，则/boot目录也可以备份，不过影响不大。

## 我的备份目的

在重新安装系统后可以免去配置vim以及安装软件的麻烦！只需要进行下系统更新就可以使用！

> 注意：我不是专业人士，因此，如果你是做Linux数据库维护的，那你的备份将远不止于这些。

## 备份步骤

### 1. 备份用户程序

`/usr/local`目录下为一般用户程序的安装位置：

```bash
tar -zcpPvf local.tar.gz /usr/local/
```

`/opt`也常用于存放用户程序：

```bash
tar -zcpPvf opt.tar.gz /opt/
```

### 2. 备份全局参数配置文件

Linux下大部分配置都保存在`/etc/`文件夹下：

```bash
tar -zcpPvf etc.tar.gz /etc/
```

### 3. 备份用户目录

```bash
tar -zcpPvf username.tar.gz /home/username/
```

## 参数说明

- `-z`: 通过gzip压缩
- `-c`: 创建新的归档文件
- `-p`: 保持文件的权限属性
- `-P`: 使用绝对路径
- `-v`: 显示详细过程
- `-f`: 指定归档文件名

## 恢复步骤

系统重装后，只需将备份的压缩包解压到相应位置即可：

```bash
# 恢复用户程序
tar -zxPvf local.tar.gz
tar -zxPvf opt.tar.gz

# 恢复配置文件
tar -zxPvf etc.tar.gz

# 恢复用户目录
tar -zxPvf username.tar.gz
```

这样就能够快速恢复工作环境，省去重新配置和安装软件的麻烦。